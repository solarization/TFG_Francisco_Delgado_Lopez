#+TITLE: Desarrollo de una herramienta software para la simulación de sistemas fotovoltaicos con R
#+SUBTITLE: Trabajo de Fin de Grado
#+STARTUP: indent
#+STARTUP: inlineimages 
#+SETUPFILE: config.org
#+OPTIONS: H:3
#+PROPERTY: header-args R :session solaR2

* Introducción
*** Objetivo principal
**** Desarrollo de un paquete en =R=
   #+begin_src R :results none
library(solaR2)
   #+end_src

*** Objetivos secundarios
**** GNU Emacs
**** Paquetes de =R=
- =solaR=
- =zoo=
- =data.table=
- =microbenchmark=
- =profvis=
- =lattice=
**** LaTeX
**** Energía Solar Fotovoltaica

* Estado del arte
** Sitación actual de la generación fotovoltaica

** Soluciones actuales
*** Soluciones actuales
**** *PVsyst*
**** *SISIFO*
**** *PVGIS*
**** *System Advisor Model*
*** =solaR=
**** Funcionamiento
- Geometría solar
- Datos meteorológicos
- Radiación en el plano horizontal
- Radiación en el plano del generador
- Simulación de SFCR
- Simulación de SFB
- Optimización de distancias
- Métodos de visualización
*** =solaR=
**** Carencias
- Modularidad
- Eficiencia y rendimiento
- Escalibilidad
- Manipulación de datos
  
* Marco teórico
*** Procedimiento de cálculo
#+ATTR_LATEX: :scale 1
file:../figuras/ProcedimientoCalculoRadiacionInclinada.pdf
* Desarrollo del código
*** Algorítmo de cálculo
#+ATTR_LATEX: :height 0.9\textheight
file:../figuras/procedure.pdf
*** =calcSol=
#+ATTR_LATEX: :width \textwidth
file:../figuras/calcsol.pdf
*** =Meteo=
#+ATTR_LATEX: :width \textwidth
file:../figuras/meteo.pdf
*** =calcG0=
#+ATTR_LATEX: :width \textwidth
file:../figuras/calcg0.pdf
*** =calcGef=
#+ATTR_LATEX: :width \textwidth
file:../figuras/calcgef.pdf
*** =prodGCPV=
#+ATTR_LATEX: :width \textwidth
file:../figuras/prodgcpv.pdf
*** =prodPVPS=
#+ATTR_LATEX: :width \textwidth
file:../figuras/prodpvps.pdf
* Ejemplo práctico de aplicación
*** Información meteorológica
#+begin_src R
etsidi_1315 <- readBDi(file = 'TFG/data/PVGIS_1315.csv',
                       lat = 40.4, dates.col = 'Dates',
                       format = '%Y-%m-%d %H:%M:%S')
#+end_src
*** Información meteorológica
#+ATTR_LATEX: :height 0.9\textheight
file:../figuras/ejemplos3.pdf
*** Producción de diferentes sistemas
#+begin_src R :exports none
module1 <- list(Vocn = 37.1,
                Iscn = 8.76,
                Vmn = 29.9,
                Imn = 8.37,
                Ncs = 60,
                Ncp = 1,
                CoefVT = 0.00338,
                TONC = 43.7)
module2 <- list(Vocn = 36.5,
                Iscn = 8.15,
                Vmn = 29,
                Imn = 7.59,
                Ncs = 60,
                Ncp = 1,
                CoefVT = 0.0037,
                TONC = 46)
generator1 <- list(Nms = 5, Nmp = 1)
generator2 <- list(Nms = 5, Nmp = 1)
inverter <- list(Ki = c(0.002, 0.005, 0.008),
                 Pinv = 1200,
                 Vmin = 100,
                 Vmax = 320,
                 Gumb = 20)
#+end_src
#+begin_src R
prod1 <- prodGCPV(lat = 40.4, modeTrk = 'fixed', modeRad = 'bdI',
                  dataRad = etsidi_1315, beta = 30, alpha = -19,
                  module = module1, generator = generator1,
                  inverter = inverter)
show(as.data.tableY(prod1))
#+end_src
#+begin_src R
prod2 <- prodGCPV(lat = 40.4, modeTrk = 'fixed', modeRad = 'bdI',
                  dataRad = etsidi_1315, beta = 30, alpha = -19,
                  module = module2, generator = generator2,
                  inverter = inverter)
show(as.data.tableY(prod2))
#+end_src
*** Comparación de producciones
#+ATTR_LATEX: :height 0.9\textheight
file:../figuras/ejemplos4.pdf
* Conclusiones
** Aportaciones
*** Blame
#+ATTR_LATEX: :height 0.9\textheight
file:../figuras/blame-fCompD.pdf
*** Blame
#+ATTR_LATEX: :width \textwidth
file:../figuras/blame-fCompD_cropped.pdf
*** Insights
#+ATTR_LATEX: :height 0.9\textheight
file:../figuras/contributors.png
** Desarrollo a futuro
*** Desarrollo a futuro
**** Interfaz de usuario
**** Mejora de funciones
**** Toma de datos 
**** Uso de paquete especializados en datos espaciales
- =terra=
