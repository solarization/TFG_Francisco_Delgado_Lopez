%estilo de capitulos
\chapterstyle{veelo} %  This style created by Bastiaan Veelo and is raggedleft, large, bold and with a black square in the margin by the number line.
%\chapterstyle{ger} % This style was created by Gerardo Garcia8 and is a two line, raggedright, large bold style with rules above and below.

%Idioma español y acentos
\usepackage[spanish]{babel}
\addto\shorthandsspanish{\spanishdeactivate{~<>}}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

%Fuente
\usepackage{mathpazo} %URW Palladio
\usepackage{flafter}%obliga a que los flotantes aparezcan después de su referencia

%algunos simbolos matemáticos y paquetes para usar subimágenes
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{appendix}

%Márgenes
\usepackage[a4paper]{geometry}
\geometry{tmargin=2.5cm, bmargin=2.5cm, rmargin=2.5cm, lmargin=2.5cm}
\pagestyle{Ruled}

%multi columnas
\usepackage{multicol}

%colores
\usepackage[dvipsnames]{xcolor}

%código
\usepackage{verbatim}

%para generar índice con hipervínculos
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=Brown,          % color of internal links
    citecolor=BrickRed,        % color of links to bibliography
    filecolor=black,      % color of file links
    urlcolor=Blue           % color of external links 
}

%nomenclatura
\usepackage{nomencl}
\makenomenclature

%traducciones
\addto\captionsspanish{%
	\def\tablename{Tabla}%
	\def\listtablename{\'Indice de tablas}}

\renewcommand\nomname{Nomenclatura}
\def\nompreamble{\addcontentsline{toc}{chapter}{\nomname}\markboth{\nomname}{\nomname}}


\definecolor{mediumgray}{rgb}{0.3, 0.4, 0.4}
\definecolor{mediumblue}{rgb}{0.16, 0.5, 0.73}
\definecolor{forestgreen}{rgb}{0.13, 0.55, 0.13}
\definecolor{darkviolet}{rgb}{0.58, 0.0, 0.83}
\definecolor{royalblue}{rgb}{0.25, 0.41, 0.88}
\definecolor{crimson}{rgb}{0.86, 0.8, 0.24}
\definecolor{lightgrey}{rgb}{0.97, 0.97, 0.97}
\definecolor{black}{rgb}{0.05, 0.05, 0.1}
\definecolor{green}{rgb}{0.1529, 0.6823, 0.3764}
\definecolor{red6}{rgb}{0.753, 0.224, 0.169}

\lstset{
  language = R,
  backgroundcolor=\color{lightgrey},
  basicstyle=\fontsize{11}{12}\selectfont\ttfamily,
  breakatwhitespace=false,
  breaklines=true,
  captionpos=b,
  columns=fullflexible,
  commentstyle=\color{mediumgray}\upshape,
  emph={},
  emphstyle=\color{crimson},
  extendedchars=true,  % requires inputenc
  fontadjust=true,
  frame=single,
  identifierstyle=\color{black},
  keepspaces=true,
  keywordstyle=\color{mediumblue},
  keywordstyle={[2]\color{darkviolet}},
  keywordstyle={[3]\color{red}},
  numbers=left,
  numbersep=10pt,
  numberstyle=\tiny\color{black},
  rulecolor=\color{black},
  showlines=true,
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  stringstyle=\color{green},
  tabsize=1,
  title=\lstname,
  upquote=true,  % requires textcomp
  literate={á}{{\'a}}1
           {ñ}{{\~n}}1
           {é}{{\'e}}1
           {ó}{{\'o}}1
           {º}{{\textordmasculine}}1
           {í}{{\'i}}1            
           {’}{{\textquotesingle}}1{‘}{{\textquoteleft}}1
           {“}{{\textquotedbl}}1{”}{{\textquotedbl}}1
}

%captions de listings
\renewcommand{\lstlistingname}{Extracto de código}

%configuración de verbatim
\usepackage{fancyvrb}
\usepackage{fvextra}
\DefineVerbatimEnvironment{verbatim}{Verbatim}{
  fontsize=\scriptsize,
  formatcom={\color{black!80}},
  frame = single,
  framerule = 0.5pt,
  framesep = 2mm,
  xleftmargin = -4mm,
  xrightmargin = -4mm
  }

%bibliografia
\usepackage[backend=biber, style=alphabetic, sorting=ynt]{biblatex}
\addbibresource{bibliografia/bibliografia.bib}

% Configuración de numeración y tabla de contenidos
\setsecnumdepth{subsection}   % Permite numerar hasta subsecciones
\settocdepth{section}      % Incluye hasta las subsecciones en la tabla de contenidos

\usepackage[caption=false]{subfig}
%Configuración de los caption
%\PassOptionsToPackage{caption=false}{subfig}%Evita que el paquete subfig lo descabale todo
\captiontitlefont{\itshape}
\captionnamefont{\scshape}
%\captionstyle{\centering}
\hangcaption

%Centra las figuras en los flotantes y los enmarca
\makeatletter
\renewenvironment{figure}[1][]{%
     	\@float{figure}%
		%\begin{framed}    
		\precaption{\rule{\linewidth}{0.4pt}\par}%En las figuras el caption va debajo
		%\hrule\vspace{\onelineskip}
		\centering
		  }{%
		%\end{framed}
		%\postcaption{\rule{\linewidth}{0.4pt}}
		%\vspace{\onelineskip}\hrule
    	\end@float	
}
\makeatother

\makeatletter
\renewenvironment{table}[1][]{%
      	\@float{table}%
		%\begin{framed}    
		\postcaption{\rule{\linewidth}{0.4pt}\par}%En las tablas el caption va encima
		\centering
		  }{%
		%\end{framed}
    	\end@float	
}
\makeatother

% footnotes
\usepackage[bottom]{footmisc}

% example
\usepackage{tcolorbox}
\tcbset{
  colback=gray!10,
  colframe=black,
  width=\textwidth,
  enlarge left by=0mm,
  boxrule=0.5mm,
  arc=3mm,
  auto outer arc
}
% Definición de un nuevo tcolorbox para ejemplos
\newtcolorbox{examplebox}[1][]{%
  before upper={%
    % Redefinir el entorno Verbatim para desactivar el marco
    \DefineVerbatimEnvironment{verbatim}{Verbatim}{%
      fontsize=\small,
      formatcom={\color{black!80}},
      frame=none, % Desactivar el marco
      framesep=2mm,
      xleftmargin=-2mm,
      xrightmargin=-2mm
    }},
  #1
}

% Espacio entre parrafos
\setlength{\parskip}{1em}

% texttt
\usepackage{lmodern}
\renewcommand{\texttt}[1]{\textbf{\ttfamily{#1}}}
